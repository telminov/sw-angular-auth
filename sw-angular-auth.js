(function() {
  var indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  angular.module('swAuth', ['ngCookies', 'ngRoute']).constant('AUTH_UPDATE_USER', 'sw_auth_service_update_user').constant('AUTH_SERVER_REJECT', 'sw_auth_service_server_401_or_403_reject').config(function($httpProvider) {
    return $httpProvider.interceptors.push('authInterceptor');
  }).factory('authInterceptor', function($location, $q, $rootScope, AUTH_SERVER_REJECT) {
    return {
      responseError: function(response) {
        if ((response != null ? response.status : void 0) === 401 || (response != null ? response.status : void 0) === 403) {
          $rootScope.$broadcast(AUTH_SERVER_REJECT, response.status, response.data);
        }
        return $q.reject(response);
      }
    };
  }).run(function($rootScope, $location, auth, authConfig, AUTH_UPDATE_USER, AUTH_SERVER_REJECT) {
    $rootScope.$on('$routeChangeStart', function(scope, next, current) {
      var loginUrl, nextPath, ref;
      nextPath = '';
      if (next != null ? (ref = next.$$route) != null ? ref.originalPath : void 0 : void 0) {
        nextPath = next.$$route.originalPath;
      }
      if (!auth.isAuthenticated() && indexOf.call(authConfig.getFreeUrls(), nextPath) < 0) {
        loginUrl = auth.getLoginUrl();
        if (loginUrl === nextPath) {
          return;
        }
        return $location.path(loginUrl);
      }
    });
    return $rootScope.$on(AUTH_SERVER_REJECT, function(event, server_status) {
      auth.clearCurrentUser();
      return $location.path(auth.getLoginUrl());
    });
  });

}).call(this);

(function() {
  angular.module('swAuth').provider('authConfig', function() {
    var config;
    config = {
      systemLabel: 'System Label',
      serverAddress: '/server_url',
      serverLoginUrl: '/api/auth/login/',
      serverLogoutUrl: '/api/auth/logout/',
      serverUserInfoUrl: '/api/auth/current_user/',
      serverCSRFUrl: '/api/auth/get_csrf/',
      appLoginUrl: '/login/',
      freeUrls: []
    };
    return {
      $get: function() {
        return {
          getSystemLabel: function() {
            return config.systemLabel;
          },
          getServerAddress: function() {
            return config.serverAddress;
          },
          getServerLoginUrl: function() {
            return config.serverAddress + config.serverLoginUrl;
          },
          getServerLogoutUrl: function() {
            return config.serverAddress + config.serverLogoutUrl;
          },
          getServerUserInfoUrl: function() {
            return config.serverAddress + config.serverUserInfoUrl;
          },
          getServerCSRFUrl: function() {
            return config.serverAddress + config.serverCSRFUrl;
          },
          getAppLoginUrl: function() {
            return config.appLoginUrl;
          },
          getFreeUrls: function() {
            return config.freeUrls;
          }
        };
      },
      setSystemLabel: function(label) {
        return config.systemLabel = label;
      },
      setServerAddress: function(address) {
        return config.serverAddress = address;
      },
      setServerLoginUrl: function(url) {
        return config.serverLoginUrl = url;
      },
      setServerLogoutUrl: function(url) {
        return config.serverLogoutUrl = url;
      },
      setServerUserInfoUrl: function(url) {
        return config.serverUserInfoUrl = url;
      },
      setServerCSRFUrl: function(url) {
        return config.serverCSRFUrl = url;
      },
      setAppLoginUrl: function(url) {
        return config.appLoginUrl = url;
      },
      setFreeUrls: function(freeUrls) {
        return config.freeUrls = freeUrls;
      }
    };
  });

}).call(this);

(function() {
  angular.module('swAuth').service('auth', function($http, $rootScope, $cookieStore, $location, authConfig, AUTH_UPDATE_USER) {
    var auth;
    auth = this;
    auth.getUser = function() {
      return $cookieStore.get('user');
    };
    auth.setUser = function(newUserData) {
      var oldUserData;
      oldUserData = auth.getUser();
      $cookieStore.put('user', newUserData);
      return $rootScope.$broadcast(AUTH_UPDATE_USER, newUserData, oldUserData);
    };
    auth.isAuthenticated = function(userData) {
      var user;
      user = userData || auth.getUser();
      return (user != null ? user.is_authenticated : void 0) || false;
    };
    auth.getName = function(userData) {
      var user;
      user = userData || auth.getUser();
      return user != null ? user.username : void 0;
    };
    auth.getLoginUrl = function() {
      return authConfig.getAppLoginUrl();
    };
    auth.login = function(username, password) {
      var loginPromise, loginUrl;
      loginUrl = authConfig.getServerLoginUrl();
      loginPromise = $http({
        method: "POST",
        url: loginUrl,
        data: $.param({
          username: username,
          password: password
        }),
        withCredentials: true
      });
      loginPromise = loginPromise.then(function() {
        return auth.getCurrentUser();
      });
      return loginPromise;
    };
    auth.getCurrentUser = function() {
      var userPromise;
      userPromise = $http({
        method: "GET",
        url: authConfig.getServerUserInfoUrl(),
        withCredentials: true
      });
      userPromise = userPromise.then(function(response) {
        var newUserData;
        newUserData = response.data;
        auth.setUser(newUserData);
        return newUserData;
      });
      return userPromise;
    };
    auth.clearCurrentUser = function() {
      var newUserData;
      newUserData = {};
      return auth.setUser(newUserData);
    };
    auth.logout = function() {
      var logoutPromise;
      logoutPromise = $http({
        method: "POST",
        url: authConfig.getServerLogoutUrl(),
        withCredentials: true
      });
      logoutPromise.then(function() {
        return auth.clearCurrentUser();
      });
      return logoutPromise;
    };
    auth.isLoginPage = function() {
      return $location.path() === authConfig.getAppLoginUrl();
    };
  });

}).call(this);

(function() {
  angular.module('swAuth').controller('AuthLoginCtrl', function($scope, $location, auth, authConfig) {
    var fail, success;
    $scope.header = authConfig.getSystemLabel();
    success = function() {
      return $location.path('/');
    };
    fail = function(response) {
      var ref;
      return $scope.loginErrors = ((ref = response.data) != null ? ref.errors : void 0) || ['Ошибка аутентификации'];
    };
    return $scope.logIn = function() {
      var loginPromise;
      $scope.loginErrors = void 0;
      loginPromise = auth.login($scope.login, $scope.password);
      return loginPromise.then(success, fail);
    };
  });

}).call(this);

(function() {
  angular.module('swAuth').controller('AuthLogoutCtrl', function($scope, $location, $log, auth, authConfig) {
    $scope.header = authConfig.getSystemLabel();
    $scope.inProcess = true;
    return auth.logout().then(function() {
      $scope.inProcess = false;
      return $location.path('/');
    }, function(response) {
      $scope.inProcess = false;
      $log.error(response);
      return $scope.logoutError = "Logout error";
    });
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5jb2ZmZWUiLCJjb25maWcuY29mZmVlIiwic2VydmljZXMuY29mZmVlIiwiY29udHJvbGxlcnMvbG9naW4uY29mZmVlIiwiY29udHJvbGxlcnMvbG9nb3V0LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBLE1BQUEsbUpBQUE7O0FBQUEsRUFBQSxPQUFPLENBQUMsTUFBUixDQUFlLFFBQWYsRUFBeUIsQ0FDckIsV0FEcUIsRUFFckIsU0FGcUIsQ0FBekIsQ0FLSSxDQUFDLFFBTEwsQ0FLYyxrQkFMZCxFQUtrQyw2QkFMbEMsQ0FNSSxDQUFDLFFBTkwsQ0FNYyxvQkFOZCxFQU1vQywwQ0FOcEMsQ0FRSSxDQUFDLE1BUkwsQ0FRWSxTQUFDLGFBQUQsR0FBQTtXQUNKLGFBQWEsQ0FBQyxZQUFZLENBQUMsSUFBM0IsQ0FBZ0MsaUJBQWhDLEVBREk7RUFBQSxDQVJaLENBWUksQ0FBQyxPQVpMLENBWWEsaUJBWmIsRUFZZ0MsU0FBQyxTQUFELEVBQVksRUFBWixFQUFnQixVQUFoQixFQUE0QixrQkFBNUIsR0FBQTtBQUN4QixXQUFPO0FBQUEsTUFDSCxhQUFBLEVBQWUsU0FBQyxRQUFELEdBQUE7QUFDWCxRQUFBLHdCQUFHLFFBQVEsQ0FBRSxnQkFBVixLQUFvQixHQUFwQix3QkFBMkIsUUFBUSxDQUFFLGdCQUFWLEtBQW9CLEdBQWxEO0FBQ0ksVUFBQSxVQUFVLENBQUMsVUFBWCxDQUFzQixrQkFBdEIsRUFBMEMsUUFBUSxDQUFDLE1BQW5ELEVBQTJELFFBQVEsQ0FBQyxJQUFwRSxDQUFBLENBREo7U0FBQTtBQUVBLGVBQU8sRUFBRSxDQUFDLE1BQUgsQ0FBVSxRQUFWLENBQVAsQ0FIVztNQUFBLENBRFo7S0FBUCxDQUR3QjtFQUFBLENBWmhDLENBc0JJLENBQUMsR0F0QkwsQ0FzQlMsU0FBQyxVQUFELEVBQWEsU0FBYixFQUF3QixJQUF4QixFQUE4QixVQUE5QixFQUEwQyxnQkFBMUMsRUFBNEQsa0JBQTVELEdBQUE7QUFFRCxJ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QSxNQUVBLFlBQUEsR0FBZSxJQUFJLENBQUMsS0FBTCxDQUNYLE1BQU0sQ0FBQyxLQURJLEVBRVgsTUFBTSxDQUFDLFFBRkksQ0FGZixDQUFBO2FBT0EsWUFBWSxDQUFDLElBQWIsQ0FBa0IsT0FBbEIsRUFBMkIsSUFBM0IsRUFSVztJQUFBLEVBVFU7RUFBQSxDQURqQyxDQUFBLENBQUE7QUFBQTs7O0FDQUE7QUFBQSxFQUFBLE9BQU8sQ0FBQyxNQUFSLENBQWUsUUFBZixDQUNJLENBQUMsVUFETCxDQUNnQixnQkFEaEIsRUFDa0MsU0FBQyxNQUFELEVBQVMsU0FBVCxFQUFvQixJQUFwQixFQUEwQixJQUExQixFQUFnQyxVQUFoQyxHQUFBO0FBQzFCLElBQUEsTUFBTSxDQUFDLE1BQVAsR0FBZ0IsVUFBVSxDQUFDLGNBQVgsQ0FBQSxDQUFoQixDQUFBO0FBQUEsSUFFQSxNQUFNLENBQUMsU0FBUCxHQUFtQixJQUZuQixDQUFBO1dBR0EsSUFBSSxDQUFDLE1BQUwsQ0FBQSxDQUFhLENBQUMsSUFBZCxDQUNJLFNBQUEsR0FBQTtBQUNJLE1BQUEsTUFBTSxDQUFDLFNBQVAsR0FBbUIsS0FBbkIsQ0FBQTthQUNBLFNBQVMsQ0FBQyxJQUFWLENBQWUsR0FBZixFQUZKO0lBQUEsQ0FESixFQUlJLFNBQUMsUUFBRCxHQUFBO0FBQ0ksTUFBQSxNQUFNLENBQUMsU0FBUCxHQUFtQixLQUFuQixDQUFBO0FBQUEsTUFDQSxJQUFJLENBQUMsS0FBTCxDQUFXLFFBQVgsQ0FEQSxDQUFBO2FBRUEsTUFBTSxDQUFDLFdBQVAsR0FBcUIsZUFIekI7SUFBQSxDQUpKLEVBSjBCO0VBQUEsQ0FEbEMsQ0FBQSxDQUFBO0FBQUEiLCJmaWxlIjoic3ctYW5ndWxhci1hdXRoLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ3N3QXV0aCcsIFtcbiAgICAnbmdDb29raWVzJ1xuICAgICduZ1JvdXRlJ1xuXSlcblxuICAgIC5jb25zdGFudCgnQVVUSF9VUERBVEVfVVNFUicsICdzd19hdXRoX3NlcnZpY2VfdXBkYXRlX3VzZXInKVxuICAgIC5jb25zdGFudCgnQVVUSF9TRVJWRVJfUkVKRUNUJywgJ3N3X2F1dGhfc2VydmljZV9zZXJ2ZXJfNDAxX29yXzQwM19yZWplY3QnKVxuXG4gICAgLmNvbmZpZyAoJGh0dHBQcm92aWRlcikgLT5cbiAgICAgICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnYXV0aEludGVyY2VwdG9yJylcblxuICAgICMgYnJvYWRjYXN0IG9mIDQwMSBvciA0MDMgaHR0cCBzdGF0dXNcbiAgICAuZmFjdG9yeSAnYXV0aEludGVyY2VwdG9yJywgKCRsb2NhdGlvbiwgJHEsICRyb290U2NvcGUsIEFVVEhfU0VSVkVSX1JFSkVDVCkgLT5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3BvbnNlRXJyb3I6IChyZXNwb25zZSkgLT5cbiAgICAgICAgICAgICAgICBpZiByZXNwb25zZT8uc3RhdHVzID09IDQwMSBvciByZXNwb25zZT8uc3RhdHVzID09IDQwM1xuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QgQVVUSF9TRVJWRVJfUkVKRUNULCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLmRhdGFcbiAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlc3BvbnNlKVxuXG4gICAgICAgIH1cblxuXG4gICAgLnJ1biAoJHJvb3RTY29wZSwgJGxvY2F0aW9uLCBhdXRoLCBhdXRoQ29uZmlnLCBBVVRIX1VQREFURV9VU0VSLCBBVVRIX1NFUlZFUl9SRUpFQ1QpIC0+XG4gICAgICAgICMgc3Vic2NyaWJlIG9uIHVybCBjaGFuZ2luZ1xuICAgICAgICAkcm9vdFNjb3BlLiRvbiAnJHJvdXRlQ2hhbmdlU3RhcnQnLCAoc2NvcGUsIG5leHQsIGN1cnJlbnQpIC0+XG4gICAgICAgICAgICAjIHNhdmUgb3JpZ2luIHBhdGhcbiAgICAgICAgICAgIG5leHRQYXRoID0gJydcbiAgICAgICAgICAgIGlmIG5leHQ/LiQkcm91dGU/Lm9yaWdpbmFsUGF0aFxuICAgICAgICAgICAgICAgIG5leHRQYXRoID0gbmV4dC4kJHJvdXRlLm9yaWdpbmFsUGF0aFxuXG4gICAgICAgICAgICAjIHJlZGlyZWN0IG5vdCBhdXRob3JpemVkIHVzZXIgdG8gbG9naW4gcGFnZVxuICAgICAgICAgICAgaWYgbm90IGF1dGguaXNBdXRoZW50aWNhdGVkKCkgYW5kIG5leHRQYXRoIG5vdCBpbiBhdXRoQ29uZmlnLmdldEZyZWVVcmxzKClcbiAgICAgICAgICAgICAgICBsb2dpblVybCA9IGF1dGguZ2V0TG9naW5VcmwoKVxuXG4gICAgICAgICAgICAgICAgIyBza2lwIHJlZGlyZWN0aW9uIGlmIHdlIGFyZSBnb2luZyB0byBsb2dpbiBwYWdlXG4gICAgICAgICAgICAgICAgaWYgbG9naW5VcmwgPT0gbmV4dFBhdGhcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG5cbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChsb2dpblVybClcblxuICAgICAgICAjIHN1YnNjcmliZSBzZXJ2ZXIgcmVqZWN0aW5nXG4gICAgICAgICRyb290U2NvcGUuJG9uIEFVVEhfU0VSVkVSX1JFSkVDVCwgKGV2ZW50LCBzZXJ2ZXJfc3RhdHVzKSAtPlxuICAgICAgICAgICAgYXV0aC5jbGVhckN1cnJlbnRVc2VyKClcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKGF1dGguZ2V0TG9naW5VcmwoKSkiLCJhbmd1bGFyLm1vZHVsZSgnc3dBdXRoJylcclxuICAgIC5wcm92aWRlciAnYXV0aENvbmZpZycsIC0+XHJcbiAgICAgICAgY29uZmlnID0ge1xyXG4gICAgICAgICAgICBzeXN0ZW1MYWJlbDogJ1N5c3RlbSBMYWJlbCdcclxuICAgICAgICAgICAgc2VydmVyQWRkcmVzczogJy9zZXJ2ZXJfdXJsJ1xyXG4gICAgICAgICAgICBzZXJ2ZXJMb2dpblVybDogJy9hcGkvYXV0aC9sb2dpbi8nXHJcbiAgICAgICAgICAgIHNlcnZlckxvZ291dFVybDogJy9hcGkvYXV0aC9sb2dvdXQvJ1xyXG4gICAgICAgICAgICBzZXJ2ZXJVc2VySW5mb1VybDogJy9hcGkvYXV0aC9jdXJyZW50X3VzZXIvJ1xyXG4gICAgICAgICAgICBzZXJ2ZXJDU1JGVXJsOiAnL2FwaS9hdXRoL2dldF9jc3JmLydcclxuICAgICAgICAgICAgYXBwTG9naW5Vcmw6ICcvbG9naW4vJ1xyXG4gICAgICAgICAgICBmcmVlVXJsczogW11cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICRnZXQ6IC0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0U3lzdGVtTGFiZWw6IC0+IGNvbmZpZy5zeXN0ZW1MYWJlbFxyXG4gICAgICAgICAgICAgICAgICAgIGdldFNlcnZlckFkZHJlc3M6IC0+IGNvbmZpZy5zZXJ2ZXJBZGRyZXNzXHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0U2VydmVyTG9naW5Vcmw6IC0+IGNvbmZpZy5zZXJ2ZXJBZGRyZXNzICsgY29uZmlnLnNlcnZlckxvZ2luVXJsXHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0U2VydmVyTG9nb3V0VXJsOiAtPiBjb25maWcuc2VydmVyQWRkcmVzcyArIGNvbmZpZy5zZXJ2ZXJMb2dvdXRVcmxcclxuICAgICAgICAgICAgICAgICAgICBnZXRTZXJ2ZXJVc2VySW5mb1VybDogLT4gY29uZmlnLnNlcnZlckFkZHJlc3MgKyBjb25maWcuc2VydmVyVXNlckluZm9VcmxcclxuICAgICAgICAgICAgICAgICAgICBnZXRTZXJ2ZXJDU1JGVXJsOiAtPiBjb25maWcuc2VydmVyQWRkcmVzcyArIGNvbmZpZy5zZXJ2ZXJDU1JGVXJsXHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0QXBwTG9naW5Vcmw6IC0+IGNvbmZpZy5hcHBMb2dpblVybFxyXG4gICAgICAgICAgICAgICAgICAgIGdldEZyZWVVcmxzOiAtPiBjb25maWcuZnJlZVVybHNcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNldFN5c3RlbUxhYmVsOiAobGFiZWwpIC0+XHJcbiAgICAgICAgICAgICAgICBjb25maWcuc3lzdGVtTGFiZWwgPSBsYWJlbFxyXG5cclxuICAgICAgICAgICAgc2V0U2VydmVyQWRkcmVzczogKGFkZHJlc3MpIC0+XHJcbiAgICAgICAgICAgICAgICBjb25maWcuc2VydmVyQWRkcmVzcyA9IGFkZHJlc3NcclxuXHJcbiAgICAgICAgICAgIHNldFNlcnZlckxvZ2luVXJsOiAodXJsKSAtPlxyXG4gICAgICAgICAgICAgICAgY29uZmlnLnNlcnZlckxvZ2luVXJsID0gdXJsXHJcblxyXG4gICAgICAgICAgICBzZXRTZXJ2ZXJMb2dvdXRVcmw6ICh1cmwpIC0+XHJcbiAgICAgICAgICAgICAgICBjb25maWcuc2VydmVyTG9nb3V0VXJsID0gdXJsXHJcblxyXG4gICAgICAgICAgICBzZXRTZXJ2ZXJVc2VySW5mb1VybDogKHVybCkgLT5cclxuICAgICAgICAgICAgICAgIGNvbmZpZy5zZXJ2ZXJVc2VySW5mb1VybCA9IHVybFxyXG5cclxuICAgICAgICAgICAgc2V0U2VydmVyQ1NSRlVybDogKHVybCkgLT5cclxuICAgICAgICAgICAgICAgIGNvbmZpZy5zZXJ2ZXJDU1JGVXJsID0gdXJsXHJcblxyXG4gICAgICAgICAgICBzZXRBcHBMb2dpblVybDogKHVybCkgLT5cclxuICAgICAgICAgICAgICAgIGNvbmZpZy5hcHBMb2dpblVybCA9IHVybFxyXG5cclxuICAgICAgICAgICAgc2V0RnJlZVVybHM6IChmcmVlVXJscykgLT5cclxuICAgICAgICAgICAgICAgIGNvbmZpZy5mcmVlVXJscyA9IGZyZWVVcmxzXHJcbiAgICAgICAgfSIsImFuZ3VsYXIubW9kdWxlKCdzd0F1dGgnKVxuICAgIC5zZXJ2aWNlICdhdXRoJywgKCRodHRwLCAkcm9vdFNjb3BlLCAkY29va2llU3RvcmUsICRsb2NhdGlvbiwgYXV0aENvbmZpZywgQVVUSF9VUERBVEVfVVNFUikgLT5cbiAgICAgICAgYXV0aCA9IHRoaXNcblxuICAgICAgICBhdXRoLmdldFVzZXIgPSAtPlxuICAgICAgICAgICAgcmV0dXJuICRjb29raWVTdG9yZS5nZXQoJ3VzZXInKVxuXG4gICAgICAgIGF1dGguc2V0VXNlciA9IChuZXdVc2VyRGF0YSkgLT5cbiAgICAgICAgICAgIG9sZFVzZXJEYXRhID0gYXV0aC5nZXRVc2VyKClcbiAgICAgICAgICAgICRjb29raWVTdG9yZS5wdXQoJ3VzZXInLCBuZXdVc2VyRGF0YSlcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCBBVVRIX1VQREFURV9VU0VSLCBuZXdVc2VyRGF0YSwgb2xkVXNlckRhdGFcblxuICAgICAgICBhdXRoLmlzQXV0aGVudGljYXRlZCA9ICh1c2VyRGF0YSktPlxuICAgICAgICAgICAgdXNlciA9IHVzZXJEYXRhIG9yIGF1dGguZ2V0VXNlcigpXG4gICAgICAgICAgICByZXR1cm4gdXNlcj8uaXNfYXV0aGVudGljYXRlZCBvciBmYWxzZVxuXG4gICAgICAgIGF1dGguZ2V0TmFtZSA9ICh1c2VyRGF0YSkgLT5cbiAgICAgICAgICAgIHVzZXIgPSB1c2VyRGF0YSBvciBhdXRoLmdldFVzZXIoKVxuICAgICAgICAgICAgcmV0dXJuIHVzZXI/LnVzZXJuYW1lXG5cbiAgICAgICAgYXV0aC5nZXRMb2dpblVybCA9IC0+XG4gICAgICAgICAgICByZXR1cm4gYXV0aENvbmZpZy5nZXRBcHBMb2dpblVybCgpXG5cblxuICAgICAgICBhdXRoLmxvZ2luID0gKHVzZXJuYW1lLCBwYXNzd29yZCkgLT5cbiAgICAgICAgICAgIGxvZ2luVXJsID0gYXV0aENvbmZpZy5nZXRTZXJ2ZXJMb2dpblVybCgpXG5cbiAgICAgICAgICAgIGxvZ2luUHJvbWlzZSA9ICRodHRwKFxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCJcbiAgICAgICAgICAgICAgICB1cmw6IGxvZ2luVXJsXG4gICAgICAgICAgICAgICAgZGF0YTogJC5wYXJhbSh7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZVxuICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZVxuICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAjIGFmdGVyIGxvZ2luIGdvIHRvIHVzZXIgaW5mbyBtZXRob2RcbiAgICAgICAgICAgIGxvZ2luUHJvbWlzZSA9IGxvZ2luUHJvbWlzZS50aGVuIC0+XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF1dGguZ2V0Q3VycmVudFVzZXIoKVxuXG4gICAgICAgICAgICByZXR1cm4gbG9naW5Qcm9taXNlXG5cblxuICAgICAgICBhdXRoLmdldEN1cnJlbnRVc2VyID0gLT5cbiAgICAgICAgICAgIHVzZXJQcm9taXNlID0gJGh0dHAoXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiXG4gICAgICAgICAgICAgICAgdXJsOiBhdXRoQ29uZmlnLmdldFNlcnZlclVzZXJJbmZvVXJsKClcbiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWVcbiAgICAgICAgICAgIClcblxuICAgICAgICAgICAgIyBhZGQgc2F2ZSB1c2VyIGluZm8gbWV0aG9kIGNhbGxcbiAgICAgICAgICAgIHVzZXJQcm9taXNlID0gdXNlclByb21pc2UudGhlbiAocmVzcG9uc2UpIC0+XG4gICAgICAgICAgICAgICAgbmV3VXNlckRhdGEgPSByZXNwb25zZS5kYXRhXG4gICAgICAgICAgICAgICAgYXV0aC5zZXRVc2VyKG5ld1VzZXJEYXRhKVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXdVc2VyRGF0YVxuXG4gICAgICAgICAgICByZXR1cm4gdXNlclByb21pc2VcblxuXG4gICAgICAgIGF1dGguY2xlYXJDdXJyZW50VXNlciA9IC0+XG4gICAgICAgICAgICBuZXdVc2VyRGF0YSA9IHt9XG4gICAgICAgICAgICBhdXRoLnNldFVzZXIobmV3VXNlckRhdGEpXG5cbiAgICAgICAgYXV0aC5sb2dvdXQgPSAtPlxuICAgICAgICAgICAgbG9nb3V0UHJvbWlzZSA9ICRodHRwKFxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiXG4gICAgICAgICAgICAgICAgICAgIHVybDogYXV0aENvbmZpZy5nZXRTZXJ2ZXJMb2dvdXRVcmwoKVxuICAgICAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWVcbiAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgIGxvZ291dFByb21pc2UudGhlbiAtPlxuICAgICAgICAgICAgICAgIGF1dGguY2xlYXJDdXJyZW50VXNlcigpXG5cbiAgICAgICAgICAgIHJldHVybiBsb2dvdXRQcm9taXNlXG5cbiAgICAgICAgYXV0aC5pc0xvZ2luUGFnZSA9IC0+XG4gICAgICAgICAgICByZXR1cm4gJGxvY2F0aW9uLnBhdGgoKSA9PSBhdXRoQ29uZmlnLmdldEFwcExvZ2luVXJsKClcblxuICAgICAgICByZXR1cm4iLCJhbmd1bGFyLm1vZHVsZSgnc3dBdXRoJylcbiAgICAuY29udHJvbGxlciAnQXV0aExvZ2luQ3RybCcsICgkc2NvcGUsICRsb2NhdGlvbiwgYXV0aCwgYXV0aENvbmZpZykgLT5cbiAgICAgICAgJHNjb3BlLmhlYWRlciA9IGF1dGhDb25maWcuZ2V0U3lzdGVtTGFiZWwoKVxuXG4gICAgICAgIHN1Y2Nlc3MgPSAtPlxuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKVxuXG4gICAgICAgIGZhaWwgPSAocmVzcG9uc2UpIC0+XG4gICAgICAgICAgICAkc2NvcGUubG9naW5FcnJvcnMgPSByZXNwb25zZS5kYXRhPy5lcnJvcnMgb3IgWyfQntGI0LjQsdC60LAg0LDRg9GC0LXQvdGC0LjRhNC40LrQsNGG0LjQuCddXG5cbiAgICAgICAgJHNjb3BlLmxvZ0luID0gLT5cbiAgICAgICAgICAgICRzY29wZS5sb2dpbkVycm9ycyA9IHVuZGVmaW5lZFxuXG4gICAgICAgICAgICBsb2dpblByb21pc2UgPSBhdXRoLmxvZ2luKFxuICAgICAgICAgICAgICAgICRzY29wZS5sb2dpbixcbiAgICAgICAgICAgICAgICAkc2NvcGUucGFzc3dvcmQsXG4gICAgICAgICAgICApXG5cbiAgICAgICAgICAgIGxvZ2luUHJvbWlzZS50aGVuIHN1Y2Nlc3MsIGZhaWwiLCJhbmd1bGFyLm1vZHVsZSgnc3dBdXRoJylcbiAgICAuY29udHJvbGxlciAnQXV0aExvZ291dEN0cmwnLCAoJHNjb3BlLCAkbG9jYXRpb24sICRsb2csIGF1dGgsIGF1dGhDb25maWcpIC0+XG4gICAgICAgICRzY29wZS5oZWFkZXIgPSBhdXRoQ29uZmlnLmdldFN5c3RlbUxhYmVsKClcblxuICAgICAgICAkc2NvcGUuaW5Qcm9jZXNzID0gdHJ1ZVxuICAgICAgICBhdXRoLmxvZ291dCgpLnRoZW4oXG4gICAgICAgICAgICAtPlxuICAgICAgICAgICAgICAgICRzY29wZS5pblByb2Nlc3MgPSBmYWxzZVxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJylcbiAgICAgICAgICAgIChyZXNwb25zZSkgLT5cbiAgICAgICAgICAgICAgICAkc2NvcGUuaW5Qcm9jZXNzID0gZmFsc2VcbiAgICAgICAgICAgICAgICAkbG9nLmVycm9yKHJlc3BvbnNlKVxuICAgICAgICAgICAgICAgICRzY29wZS5sb2dvdXRFcnJvciA9IFwiTG9nb3V0IGVycm9yXCJcbiAgICAgICAgKVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9